## API справочник для работы с контроллером словарей

`DictionaryController` предоставляет REST API для работы с двумя типами словарей:

- Словарь с четырёхбуквенными ключами. /four-letter
- Словарь с пятицифровыми ключами. /five-digit

API предоставляет методы для получения, добавления, удаления и поиска записей в каждом словаре.

---

## Общая информация

- **Базовый URL:** `http://localhost:8080/api/v1/dictionary`
- Для тестирования API рекомендуется использовать инструменты, такие как **Postman**, **Insomnia** или их аналоги.  
  **Примечание:** Убедитесь, что приложение запущено и доступно по указанному адресу.

---

## 1. Работа с четырёхбуквенным словарём

### 1.1 Получение всех записей

**Метод:** `GET`  
**URL:** `/four-letter`  
**Описание:** Возвращает все записи четырёхбуквенного словаря.  
**Настройки запроса в Postman:**

- Выберите метод `GET`.
- Укажите URL: `http://localhost:8080/api/v1/dictionary/four-letter`.

**Пример ответа:**

```json
{
  "key1": "value1",
  "key2": "value2"
}
```

### 1.2 Получение записи по ключу

**Метод:** GET
**URL:** /four-letter/{key}
**Описание:** Ищет запись по четырёхбуквенному ключу.
**Настройки запроса в Postman:**

- Выберите метод GET.
- Укажите URL: http://localhost:8080/api/v1/dictionary/four-letter/{key}.
- Замените {key} на нужный ключ.

**Пример ответа:**

```json
"value1"
```

**Пример ошибки:**

```json
{
  "timestamp": "2024-11-19T07:39:18.749+00:00",
  "status": 404,
  "error": "Not Found",
  "path": "/api/v1/dictionary/four-letter/tets"
}
```

### 1.3 Добавление новой записи

**Метод:** POST
**URL:** /four-letter
**Описание:** Добавляет новую запись в четырёхбуквенный словарь.
**Настройки запроса в Postman:**

- Выберите метод POST.
- Укажите URL: http://localhost:8080/api/v1/dictionary/four-letter.
- Перейдите на вкладку Params и добавьте параметры:
- key: четырёхбуквенный ключ.
- value: значение записи.

**Пример успешного ответа:**
HTTP статус 201 Created.

**Пример ошибки:**

```json
{
  "status": 400,
  "error": "Bad Request",
  "message": "Недопустимый формат ключа: abcd"
}
```

### 1.4 Удаление записи

**Метод:** DELETE
**URL:** /four-letter/{key}
**Описание:** Удаляет запись из четырёхбуквенного словаря по ключу.
**Настройки запроса в Postman:**

- Выберите метод DELETE.
- Укажите URL: http://localhost:8080/api/v1/dictionary/four-letter/{key}.
- Замените {key} на нужный ключ.

**Пример успешного ответа:**
HTTP статус 200 OK.

**Пример ошибки:**

```json
{
  "status": 404,
  "error": "Not Found",
  "message": "Запись с ключом 'abcd' не найдена."
}
```

### Дополнительные замечания

**Обработка ошибок:**
Все исключения обрабатываются с использованием ResponseStatusException. Ответ включает HTTP статус и сообщение ошибки.

**Коды статусов:**

- 200 OK — успешное выполнение запроса.
- 201 Created — успешное создание записи.
- 400 Bad Request — ошибка в запросе (например, некорректный ключ).
- 404 Not Found — запись не найдена.

Если в Postman или других инструментах вы получаете ошибку соединения, проверьте, что приложение запущено и работает по
указанному базовому URL.

## Настройка базы данных для приложения

### 1. Требования

- Установленная PostgreSQL версии 12 или выше.
- Создана база данных с именем dictionary_db.

### 2. Создание базы данных

1. Подключитесь к PostgreSQL с помощью psql или любого графического клиента (например, pgAdmin).
2. Выполните следующий SQL-запрос для создания базы данных:

   ```sql
   CREATE DATABASE dictionary_db;
   ```

### 3. Конфигурация подключения

- Убедитесь, что файл application.yml содержит корректные настройки для подключения к базе данных. Пример:

```yaml
spring:
  datasource:
    url: jdbc:postgresql://localhost:5432/dictionary_db
    username: postgres
    password: postgres
    driver-class-name: org.postgresql.Driver
  jpa:
    hibernate:
      ddl-auto: create
    database: postgresql
    database-platform: org.hibernate.dialect.PostgreSQLDialect
    show-sql: true
    properties:
      hibernate:
        format_sql: true
```

### 4. Проверка соединения

- Запустите приложение в вашей IDE.
- Проверьте консоль. Если база данных подключена корректно, вы увидите сообщение об успешной инициализации схемы.

### 5. Устранение проблем

- Если соединение не удалось, проверьте:
    - Настройки url, username и password.
    - Доступность PostgreSQL на указанном порту.
- Убедитесь, что драйвер PostgreSQL включен в зависимости Maven:

```xml
<dependency>
    <groupId>org.postgresql</groupId>
    <artifactId>postgresql</artifactId>
    <scope>runtime</scope>
</dependency>
```
